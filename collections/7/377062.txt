In season five, John is betrayed by his commanding officer, J.G. Walker, following a failed attempt to sell nuclear weapons. John is framed for Walker's crimes; Oliver and Lyla break him out of state prison, and John stays at H.I.V.E.'s former base until his innocence can be proven. John remains guilty about killing Andy and continues to serve as Spartan to redeem himself. Due to the events of The Flash episode "Flashpoint", John's family history is altered: his daughter Sara has been erased from existence and replaced by John "J.J." Diggle, Jr., as a result of a timeline change caused by Eobard Thawne, correcting the Flashpoint reality created by Barry. John eventually learns of the alteration of his life, his daughter's erasure and his son's status as a time aberration, and despite the hurt caused by these circumstances, he chooses to forgive Barry. Lyla, however, distrusts and possibly hates Barry for this. Felicity is able to prove John's innocence by restoring the digital files that Walker had destroyed. However, Andy's betrayal and death at John's hands has taken a toll on him; he struggles to control his rage and occasionally pulverizes criminals to vent it, fueling Oliver's concern over his erratic behavior. John later befriends Oliver's chosen successor to Laurel's mantle, Dinah Drake, a Central City detective, and encourages her to set down roots in Star City. By the end of season five, John's fate is unknown due to the destruction of Lian Yu caused by Adrian Chase.