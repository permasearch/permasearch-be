The revolt spread quickly across Hungary and the government collapsed. Thousands organised into militias, battling the ÁVH and Soviet troops. Pro-Soviet communists and ÁVH members were often executed or imprisoned and former political prisoners were released and armed. Radical impromptu workers' councils wrested municipal control from the ruling Hungarian Working People's Party and demanded political changes. A new government formally disbanded the ÁVH, declared its intention to withdraw from the Warsaw Pact, and pledged to re-establish free elections. By the end of October, fighting had almost stopped and a sense of normality began to return.