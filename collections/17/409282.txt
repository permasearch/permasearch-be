Following the renewed independence of Peru, Peruvian president General Agustín Gamarra invaded Bolivia. The Peruvian army was decisively defeated at the Battle of Ingavi on 20 November 1841 where Gamarra was killed. The Bolivian army under General José Ballivián then mounted a counter-offensive, capturing the Peruvian port of Arica. Later, both sides signed a peace treaty in 1842, putting a final end to the war.