In 768, a Miknasa Berber named Shaqya ibn Abd al-Walid declared himself a Fatimid imam, claiming descent from Fatimah and Ali.[150] He is mainly known from the work of Ibn al-Athir.[151] According to Ibn al-Athir, Shaqya's revolt originated in the area of modern Cuenca, an area of Spain that is highly mountainous and challenging to traverse. Shaqya first killed the Umayyad governor of the fortress of Santaver (near Roman Ercavica), and subsequently ravaged the surrounding district of Coria. Abd ar-Rahman sent out armies to fight him in 769, 770, and 771, but Shaqya avoided them by moving into the mountains. In 772, Shaqya defeated an Umayyad force and killed the governor of the fortress of Medellin by a ruse. He was besieged by Umayyads in 774, but the revolt near Seville forced the besieging troops to withdraw. In 775 a Berber garrison in Coria declared allegiance to Shaqya, but Abd ar-Rahman retook the town and chased the Berbers into the mountains. In 776 Shaqya resisted sieges to his two main fortresses at Santaver and Shebat'ran (near Toledo). In 777 Shaqya was betrayed and killed by his own followers, who sent his head to Abd ar-Rahman.[152]