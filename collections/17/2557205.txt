A peace agreement of ten years was concluded between the Muslims and Quraysh of Mecca at the Treaty of Hudaybiyyah in 628. It has been recorded that Muhammad told Khalid's brother, Walid bin Walid, that: "A man like Khalid, can't keep himself away from Islam for long".[14] Walid wrote letters to Khalid persuading him to convert. Khalid, who was not unduly drawn towards the idols of the Kaaba, decided to convert to Islam and is said to have shared this matter with his childhood friend Ikrimah ibn Abi Jahl who opposed him. Khalid was threatened by Abu Sufyan ibn Harb with dire consequences, but was restrained by Ikrimah who is reported to have said: "Steady, O Abu Sufyan! Your anger may well lead me also to join Muhammad. Khalid is free to follow whatever religion he chooses".[15] In May 629, Khalid set out for Medina. On the way he met 'Amr ibn al-'As and Uthman ibn Talhah, who were also going to Medina to convert to Islam. They arrived at Medina on 31 May 629 and went to the house of Muhammad. Khalid was received by his elder brother Walid bin al-Walid and was first among the three men to enter Islam.[16]