In Pueblo de Los Angeles, the largest city in California with about 3,000 residents, things might have remained peaceful, except that Major Gillespie placed the town under martial law, greatly angering some of the Californios. On September 23, 1846, about 200 Californios under Californio Gen. José María Flores staged a revolt, the Siege of Los Angeles, and exchanged shots with the Americans in their quarters at the Government House. Gillespie and his men withdrew from their headquarters in town to Fort Hill which, unfortunately, had no water. Gillespie was caught in a trap, badly outnumbered by the besiegers. John Brown, an American, called by the Californios Juan Flaco,[33] meaning "Lean John", succeeded in breaking through the Californio lines and riding by horseback to San Francisco Bay (a distance of almost 400 miles (640 km)) in an amazing 52 hours where he delivered to Stockton a dispatch from Gillespie notifying him of the situation. Gillespie, on September 30, finally accepted the Californio terms and departed for San Pedro with his forces, weapons, flags and two cannon (the others were spiked and left behind). Gillespie's men were accompanied by the exchanged American prisoners and several non-Californio residents.[34]