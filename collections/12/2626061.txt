To convert a color from a colorspace based on a typical gamma-compressed (nonlinear) RGB color model to a grayscale representation of its luminance, the gamma compression function must first be removed via gamma expansion (linearization) to transform the image to a linear RGB colorspace, so that the appropriate weighted sum can be applied to the linear color components (     R   l i n e a r    ,  G   l i n e a r    ,  B   l i n e a r      {\displaystyle R_{\mathrm {linear} },G_{\mathrm {linear} },B_{\mathrm {linear} }}  ) to calculate the linear luminance Ylinear, which can then be gamma-compressed back again if the grayscale result is also to be encoded and stored in a typical nonlinear colorspace.[4]