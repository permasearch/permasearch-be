The Treaty of Guadalupe Hidalgo (1848) ended the Mexicanâ€“American War, but left issues affecting both sides that still needed to be resolved: possession of the Mesilla Valley, protection for Mexico from Indian raids, and the right of transit in the Isthmus of Tehuantepec.